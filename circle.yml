# Configuration
# NOTE: Sadly, CircleCI doesn't have "matrix" builds at the moment, so we can
# only test one environment configuration
machine:
  environment:
    CMAKE_BUILD_TYPE: Release

# Install dependencies.  We grab an updated CMake (since CircleCI is on Ubuntu
# 12.04, which ships with CMake 2.8.7, and we need 2.8.12+).  Also, we use xvfb
# otherwise the GNOME Keyring calls will fail.
dependencies:
  pre:
    - sudo add-apt-repository --yes ppa:kalakris/cmake
    - sudo apt-get update -qq
    - sudo apt-get install cmake gcr gnome-keyring libgnome-keyring-dev xvfb

# Run the tests
test:
  override:
    - xvfb ./posix-ci.sh

# Send notifications
# NOTE: CircleCI sends email notifications by default
